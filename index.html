<!DOCTYPE html>
<html lang="en">
<!-- Previous HEAD section remains exactly the same -->
<head>
    <!-- ... previous styles remain the same ... -->
    <style>
        /* Previous styles remain exactly the same */
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .question {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            display: none;
        }
        .question.active {
            display: block;
        }
        .options label {
            display: block;
            margin: 10px 0;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .options label:hover {
            background: #e8e8e8;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        #results {
            display: none;
        }
        .strategy-score {
            padding: 10px;
            margin: 5px 0;
            border-left: 4px solid #4CAF50;
            background: #f8f8f8;
        }
        .strategy-score.not-applicable {
            border-left-color: #999;
            background: #f0f0f0;
            color: #666;
            font-style: italic;
        }
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin: 20px 0;
        }
        .progress {
            width: 0%;
            height: 100%;
            background: #4CAF50;
            border-radius: 5px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- Previous HTML structure remains exactly the same -->
    <div class="container">
        <div id="quiz">
            <h1>Strategy Recommendation Quiz</h1>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <div id="questions"></div>
            <button onclick="previousQuestion()" id="prevBtn" style="display: none;">Previous</button>
            <button onclick="nextQuestion()" id="nextBtn">Next</button>
            <button onclick="showResults()" id="submitBtn" style="display: none;">Show Results</button>
        </div>
        <div id="results">
            <h2>Recommended Strategies</h2>
            <div id="strategies"></div>
            <button onclick="restartQuiz()">Start Over</button>
        </div>
    </div>

    <script>
        // Strategy titles remain the same
        const strategies = [
            "O&H Patents",
            "O&H Trademarks",
            "Court (ie See a lawyer, non injunction)",
            "ADR (WIPO)",
            "ADR (Domestic)",
            "DIY Letters & Communication",
            "External Report (eg Amazon)",
            "Report to Gov bodies",
            "ASBFEO type services",
            "ABF Notice of Objection",
            "Consult with IP Pros (eg Attorneys)",
            "AFP Referral",
            "Take No Action (but get advice)",
            "Injunction",
            "Patent re-examination",
            "Additional Option",
            "Additional Option",
            "Additional Option",
            "Additional Option",
            "Additional Option"
        ];

        // Quiz data with separate scoring and NA arrays
        const quizData = [
            {
                question: "1-1) What is the nature of your concern?",
                options: [
                    "Patents",
                    "Trademarks",
                    "Trade Secrets",
                    "Copyright",
                    "Design Rights"
                ],

 question:       "1-1) What is the nature of your concern?",
options: [
      "a) My intellectual property rights are being infringed",
      "b) I am responding to allegations of infringement",
      "c) Both parties claim infringement",
      "d) Other intellectual property matter",
      "e) I am seeking preventive measures against potential infringement",
      "f) My product is being replicated without authorization",
      "g) My website content is being duplicated without permission",
      "h) I am facing unsubstantiated intellectual property claims",
      "i) I need to initiate legal proceedings following a border seizure",
      "j) I wish to oppose a pending intellectual property application",
      "k) Unauthorized imports are infringing my intellectual property rights in Australia",

],

scoring: [
      [1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0]    , //    a) My intellectual property rights are being infringed
      [1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0]    , //    b) I am responding to allegations of infringement
      [1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0]    , //    c) Both parties claim infringement
      [1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0]    , //    d) Other intellectual property matter
      [1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0]    , //    e) I am seeking preventive measures against potential infringement
      [1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0]    , //    f) My product is being replicated without authorization
      [-1,-1,1,1,1,1,-1,-1,-1,-1,1,-1,1,-1,-1,0,0,0,0,0]    , //    g) My website content is being duplicated without permission
      [0,0,1,1,1,1,1,0,1,-1,1,0,1,-1,1,0,0,0,0,0]    , //    h) I am facing unsubstantiated intellectual property claims
      [-1,1,1,1,1,1,-1,-1,1,-1,1,-1,1,-1,-1,0,0,0,0,0]    , //    i) I need to initiate legal proceedings following a border seizure
      [1,1,1,1,1,0,0,-1,0,-1,1,-1,1,-1,1,0,0,0,0,0]    , //    j) I wish to oppose a pending intellectual property application
      [-1,-1,-1,1,-1,1,0,0,-1,1,1,1,1,-1,-1,0,0,0,0,0]    , //    k) Unauthorized imports are infringing my intellectual property rights in Australia
],

                naMarkers: [  // 1 means applicable, 0 means NA

   [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    a) My intellectual property rights are being infringed
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    b) I am responding to allegations of infringement
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    c) Both parties claim infringement
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    d) Other intellectual property matter
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    e) I am seeking preventive measures against potential infringement
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    f) My product is being replicated without authorization
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    g) My website content is being duplicated without permission
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    h) I am facing unsubstantiated intellectual property claims
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    i) I need to initiate legal proceedings following a border seizure
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    j) I wish to oppose a pending intellectual property application
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]    , //    k) Unauthorized imports are infringing my intellectual property rights in Australia

]
            },
            // Example of another question (add all your questions following this pattern)
            {
                question: "How serious is the potential impact to your business?",
                options: [
                    "Very Serious",
                    "Moderate",
                    "Minor"
                ],
                scoring: [
                    [4,4,5,4,4,2,3,4,3,4,5,4,2,5,4,0,0,0,0,0],
                    [2,2,3,3,3,4,3,3,4,3,4,2,3,3,2,0,0,0,0,0],
                    [1,1,1,1,1,3,2,2,3,1,2,0,4,1,1,0,0,0,0,0]
                ],
                naMarkers: [
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],  // Very Serious
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],  // Moderate
                    [1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1]   // Minor
                ]
            }
            // Add your remaining questions here...
        ];

        let currentQuestion = 0;
        let scores = new Array(20).fill(0);
        let applicabilityArray = new Array(20).fill(1); // Start with all options applicable

        // Previous initialization functions remain the same
        function initializeQuiz() {
            const questionsContainer = document.getElementById('questions');
            questionsContainer.innerHTML = quizData.map((q, index) => `
                <div class="question" id="question-${index}">
                    <h3>Question ${index + 1} of ${quizData.length}</h3>
                    <p>${q.question}</p>
                    <div class="options">
                        ${q.options.map((option, optIndex) => `
                            <label>
                                <input type="radio" name="q${index}" value="${optIndex}">
                                ${option}
                            </label>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            showQuestion(0);
        }

        function showQuestion(index) {
            document.querySelectorAll('.question').forEach(q => q.classList.remove('active'));
            document.getElementById(`question-${index}`).classList.add('active');
            
            const progress = ((index + 1) / quizData.length) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
            
            document.getElementById('prevBtn').style.display = index > 0 ? 'inline' : 'none';
            document.getElementById('nextBtn').style.display = index < quizData.length - 1 ? 'inline' : 'none';
            document.getElementById('submitBtn').style.display = index === quizData.length - 1 ? 'inline' : 'none';
        }

        // Navigation functions remain the same
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
            }
        }

        function nextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            }
        }

        // Modified results calculation to use separate NA tracking
        function showResults() {
            // Reset scores but keep NA tracking separate
            scores = new Array(20).fill(0);
            applicabilityArray = new Array(20).fill(1);

            // Calculate scores and update applicability
            for (let i = 0; i < quizData.length; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                if (selected) {
                    const answerIndex = parseInt(selected.value);
                    const questionScoring = quizData[i].scoring[answerIndex];
                    const questionNAMarkers = quizData[i].naMarkers[answerIndex];
                    
                    for (let j = 0; j < scores.length; j++) {
                        scores[j] += questionScoring[j];
                        // If this answer marks this strategy as NA (0), update the applicability array
                        if (questionNAMarkers[j] === 0) {
                            applicabilityArray[j] = 0;
                        }
                    }
                }
            }

            // Create array of strategy objects with scores and applicability
            let strategyScores = strategies.map((strategy, index) => ({
                strategy: strategy,
                score: scores[index],
                isApplicable: applicabilityArray[index]
            }));

            // Sort by score (highest to lowest), putting NA items at the end
            strategyScores.sort((a, b) => {
                if (!a.isApplicable && b.isApplicable) return 1;
                if (a.isApplicable && !b.isApplicable) return -1;
                return b.score - a.score;
            });

            // Display results
            document.getElementById('quiz').style.display = 'none';
            document.getElementById('results').style.display = 'block';

            // Show strategies and scores with NA marking
            document.getElementById('strategies').innerHTML = strategyScores
                .filter(item => item.score > 0 || !item.isApplicable)
                .map(item => `
                    <div class="strategy-score ${!item.isApplicable ? 'not-applicable' : ''}">
                        <strong>${item.strategy}:</strong> ${!item.isApplicable ? '- Not Applicable' : item.score}
                    </div>
                `).join('');
        }

        function restartQuiz() {
            currentQuestion = 0;
            scores = new Array(20).fill(0);
            applicabilityArray = new Array(20).fill(1);
            document.querySelectorAll('input[type="radio"]').forEach(input => input.checked = false);
            document.getElementById('results').style.display = 'none';
            document.getElementById('quiz').style.display = 'block';
            showQuestion(0);
        }

        // Initialize the quiz when page loads
        initializeQuiz();
    </script>
</body>
</html>
